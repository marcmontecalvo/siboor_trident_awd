#[include mmu/base/*.cfg]
#[include mmu/optional/client_macros.cfg]
#[include mmu/addons/blobifier.cfg]
#[include mmu/addons/mmu_erec_cutter.cfg]
[include fluidd.cfg]                  # Include configuration for fluidd

[virtual_sdcard]
path: /home/marc/printer_data/gcodes  # Path to the virtual SD card directory
on_error_gcode: CANCEL_PRINT          # G-code to execute on error (defined in CANCEL_PRINT macro)

#####################################################################
##	                 Manta M8P v2 Config
#####################################################################
[mcu]                                   # Main MCU configuration
canbus_uuid: 41a395724add               # CAN bus UUID
canbus_interface: can0                  # CAN bus interface

#####################################################################
##	                 EBB SB2209(RP2040) Config
#####################################################################
[mcu EBBCan]
canbus_uuid: 39ee83e6fda3              # Unique identifier for the CAN bus interface

#####################################################################
##                     Model and Acceleration
#####################################################################
[printer]                             # Printer configuration
kinematics: corexy                    # Printer type: corexy
max_velocity: 300                     # Maximum velocity (max 300)
max_accel: 4000                      # Maximum acceleration (max 4000)
max_z_velocity: 25                    # Maximum Z-axis velocity
max_z_accel: 100                      # Maximum Z-axis acceleration
minimum_cruise_ratio: 0.5             # Default 0.5
square_corner_velocity: 10            # Square corner velocity

[include shell_command.cfg]
[include physical_printer/*]          # Include configuration for the physical printer components
[include monitoring/*]                # Include configuration for system monitoring
[include plugins/*] 
[include macros/*]                    # Include configuration for the macros
[include lights/*]                    # Include configuration for the leds and the macros that control them

[gcode_macro DUMP_VARIABLES]
gcode:
    {% set filter_name = params.NAME|default('')|string|lower %}
    {% set filter_value = params.VALUE|default('')|string|lower %}
    {% set show_cfg = params.SHOW_CFG|default(0)|int %}
    
    {% set out = [] %}

    {% for key1 in printer %}
        {% for key2 in printer[key1] %}
            {% if (show_cfg or not (key1|lower == 'configfile' and key2|lower in ['config', 'settings'])) and (filter_name in key1|lower or filter_name in key2|lower) and filter_value in printer[key1][key2]|string|lower %}
                {% set dummy = out.append("printer['%s'].%s = %s" % (key1, key2, printer[key1][key2])) %}
            {% endif %}
        {% else %}
            {% if filter_name in key1|lower and filter_value in printer[key1]|string|lower %}
                {% set dummy = out.append("printer['%s'] = %s" % (key1, printer[key1])) %}
            {% endif %}
        {% endfor %}
    {% endfor %}
    
    {action_respond_info(out|join("\n"))}

[skew_correction]

[scanner]
#scanner_touch_threshold = 1000
#scanner_touch_z_offset = 0.050

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [scanner model default]
#*# model_coef = 1.484002579280085,
#*# 	1.8059029044375243,
#*# 	0.7578148921641162,
#*# 	0.3728350753080607,
#*# 	0.35361539958030813,
#*# 	0.302820100901477,
#*# 	-0.1636000028357296,
#*# 	-0.20197913299095382,
#*# 	0.21852345368443993,
#*# 	0.17177170012085072
#*# model_domain = 3.197167439099511e-07,3.3259675113835406e-07
#*# model_range = 0.200000,5.100000
#*# model_temp = 47.155531
#*# model_offset = 0.00000
#*# model_mode = touch
#*# model_fw_version = CARTOGRAPHER 5.1.0
#*#
#*# [heater_bed]
#*# pid_kp = 61.348
#*# pid_ki = 2.337
#*# pid_kd = 402.598
#*#
#*# [extruder]
#*# pid_kp = 26.000
#*# pid_ki = 2.194
#*# pid_kd = 77.023
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  0.026785, 0.031515, 0.042548, 0.056428, 0.065914, 0.073966, 0.072326, 0.077054, 0.076256, 0.085224, 0.086956, 0.105557, 0.109794, 0.114878, 0.118289, 0.122593, 0.119131, 0.130384, 0.130531, 0.138023, 0.132992, 0.139362, 0.132420, 0.133778, 0.127343, 0.132033, 0.122452, 0.127050, 0.124637, 0.124810, 0.119941, 0.122163, 0.119093, 0.129085, 0.136572
#*# 	  0.029591, 0.034997, 0.042494, 0.054178, 0.062709, 0.072968, 0.074377, 0.080687, 0.083196, 0.090801, 0.095615, 0.103710, 0.112867, 0.118030, 0.119923, 0.119394, 0.119224, 0.123068, 0.126782, 0.131204, 0.129976, 0.131187, 0.124567, 0.125365, 0.116947, 0.119289, 0.115007, 0.114739, 0.115015, 0.112205, 0.109364, 0.111307, 0.111717, 0.116770, 0.119592
#*# 	  0.034041, 0.036758, 0.044140, 0.054515, 0.066994, 0.071716, 0.075581, 0.078222, 0.083647, 0.088033, 0.096308, 0.101796, 0.109323, 0.111412, 0.113998, 0.112485, 0.113957, 0.113008, 0.118861, 0.120798, 0.121584, 0.120472, 0.116958, 0.110015, 0.105917, 0.107994, 0.104270, 0.102202, 0.102427, 0.099876, 0.094344, 0.096945, 0.097782, 0.099737, 0.102695
#*# 	  0.033523, 0.033198, 0.043239, 0.044981, 0.059460, 0.065885, 0.072521, 0.071967, 0.080842, 0.083935, 0.092749, 0.100358, 0.104853, 0.101907, 0.106850, 0.101135, 0.105083, 0.101012, 0.109500, 0.109968, 0.111550, 0.107939, 0.102783, 0.099265, 0.095491, 0.093547, 0.094949, 0.088868, 0.086235, 0.082207, 0.080881, 0.079360, 0.085794, 0.086345, 0.086020
#*# 	  0.034120, 0.033525, 0.046862, 0.046871, 0.058177, 0.055924, 0.071525, 0.067589, 0.079510, 0.073608, 0.089546, 0.090142, 0.102041, 0.095392, 0.100603, 0.090921, 0.096389, 0.088300, 0.101423, 0.096888, 0.102554, 0.093720, 0.091705, 0.083727, 0.085143, 0.080024, 0.078719, 0.071122, 0.073435, 0.069468, 0.070226, 0.063419, 0.070546, 0.064460, 0.070867
#*# 	  0.030896, 0.032454, 0.041757, 0.046264, 0.051728, 0.055210, 0.058975, 0.065349, 0.067188, 0.074596, 0.079379, 0.086136, 0.089971, 0.089604, 0.086957, 0.086494, 0.084149, 0.082869, 0.087536, 0.087260, 0.087450, 0.083666, 0.081705, 0.073800, 0.070615, 0.068544, 0.065305, 0.061835, 0.060623, 0.057919, 0.053575, 0.051926, 0.056074, 0.054873, 0.060026
#*# 	  0.026700, 0.028815, 0.038372, 0.040210, 0.049465, 0.048233, 0.054811, 0.051704, 0.060648, 0.061668, 0.069618, 0.076605, 0.079715, 0.072152, 0.075312, 0.068983, 0.072086, 0.067040, 0.072378, 0.070619, 0.071942, 0.071408, 0.067961, 0.060004, 0.059239, 0.055804, 0.051938, 0.052594, 0.046434, 0.042029, 0.037406, 0.032240, 0.036023, 0.033940, 0.038979
#*# 	  0.018632, 0.025514, 0.032873, 0.037564, 0.043862, 0.047097, 0.048983, 0.049442, 0.055800, 0.055106, 0.060847, 0.064133, 0.065342, 0.061748, 0.062770, 0.059908, 0.059655, 0.057847, 0.061023, 0.060510, 0.060353, 0.059093, 0.053461, 0.047890, 0.047402, 0.043404, 0.040909, 0.039456, 0.031861, 0.028431, 0.020205, 0.016592, 0.017181, 0.014966, 0.018037
#*# 	  0.014515, 0.020383, 0.027246, 0.036433, 0.039042, 0.045727, 0.046199, 0.051397, 0.049237, 0.057473, 0.055129, 0.060257, 0.055608, 0.058268, 0.053033, 0.056928, 0.047623, 0.051368, 0.046728, 0.055779, 0.049325, 0.052451, 0.044237, 0.040412, 0.034717, 0.030840, 0.029337, 0.023288, 0.018104, 0.012797, 0.005441, 0.001295, 0.000169, 0.001827, -0.000014
#*# 	  0.010756, 0.014425, 0.022822, 0.026563, 0.030321, 0.036932, 0.041618, 0.043912, 0.044987, 0.048489, 0.048764, 0.049334, 0.048744, 0.049195, 0.043933, 0.042081, 0.037851, 0.036075, 0.035986, 0.036744, 0.037588, 0.035243, 0.032684, 0.026796, 0.023354, 0.015480, 0.013254, 0.006615, 0.004259, -0.004299, -0.011732, -0.012983, -0.018122, -0.016536, -0.018615
#*# 	  0.003038, 0.014048, 0.016686, 0.022336, 0.025985, 0.033218, 0.033788, 0.037910, 0.037068, 0.040085, 0.037370, 0.047746, 0.040622, 0.039706, 0.035032, 0.031644, 0.027491, 0.026428, 0.022904, 0.030416, 0.023091, 0.027138, 0.016440, 0.016310, 0.007228, 0.004628, -0.000650, -0.002959, -0.014503, -0.016767, -0.025733, -0.029492, -0.035764, -0.033953, -0.035480
#*# 	  0.002483, 0.009164, 0.012901, 0.014980, 0.023318, 0.027255, 0.031627, 0.033509, 0.033466, 0.037595, 0.036854, 0.038875, 0.036189, 0.033507, 0.032304, 0.029424, 0.025103, 0.024492, 0.016901, 0.020107, 0.016862, 0.019411, 0.011917, 0.006114, -0.001223, -0.004479, -0.011705, -0.014965, -0.022380, -0.028337, -0.038751, -0.039378, -0.045287, -0.046299, -0.051913
#*# 	  0.005877, 0.013733, 0.013187, 0.025493, 0.022570, 0.035548, 0.030286, 0.038266, 0.037037, 0.044016, 0.038744, 0.044655, 0.037119, 0.037906, 0.029973, 0.032028, 0.022027, 0.021562, 0.016431, 0.021007, 0.016085, 0.027117, 0.011486, 0.004113, -0.007413, -0.009500, -0.019121, -0.019303, -0.031230, -0.033583, -0.048804, -0.047144, -0.061352, -0.060665, -0.065527
#*# 	  0.009926, 0.013142, 0.018702, 0.023512, 0.025858, 0.034719, 0.033986, 0.036575, 0.036589, 0.038501, 0.035966, 0.037083, 0.034854, 0.033052, 0.027426, 0.026608, 0.020433, 0.018073, 0.017270, 0.011932, 0.010984, 0.007984, -0.000638, -0.008036, -0.016724, -0.023037, -0.029096, -0.037662, -0.043211, -0.051036, -0.062666, -0.064254, -0.073977, -0.075876, -0.081859
#*# 	  0.008868, 0.016795, 0.018233, 0.021265, 0.025017, 0.028814, 0.031563, 0.032128, 0.031985, 0.033414, 0.028716, 0.034439, 0.032227, 0.024751, 0.026089, 0.016160, 0.012455, 0.012386, 0.010076, 0.009600, -0.000524, 0.000988, -0.011410, -0.014705, -0.023415, -0.033093, -0.039596, -0.046617, -0.050490, -0.063086, -0.071460, -0.079391, -0.086318, -0.088740, -0.093440
#*# 	  0.000365, 0.009172, 0.010507, 0.016398, 0.020860, 0.026757, 0.029220, 0.027198, 0.032474, 0.027542, 0.030396, 0.029074, 0.025385, 0.020351, 0.016802, 0.011190, 0.007893, 0.007661, 0.004212, 0.003450, -0.001759, -0.005512, -0.015029, -0.021613, -0.030011, -0.038206, -0.048390, -0.052786, -0.058867, -0.069548, -0.080127, -0.086390, -0.092502, -0.095993, -0.103347
#*# 	  -0.008384, -0.002405, 0.007404, 0.008579, 0.018428, 0.019300, 0.024520, 0.021315, 0.023126, 0.023537, 0.022791, 0.021200, 0.022061, 0.016108, 0.010991, 0.006739, 0.004645, 0.001735, -0.000347, -0.002252, -0.001970, -0.012145, -0.016249, -0.029800, -0.036900, -0.044074, -0.055926, -0.062495, -0.070017, -0.078376, -0.091642, -0.093732, -0.109069, -0.111053, -0.115862
#*# 	  -0.001230, -0.000162, 0.007002, 0.009887, 0.017090, 0.017739, 0.018394, 0.019430, 0.020684, 0.019043, 0.024217, 0.018579, 0.020502, 0.013306, 0.011899, 0.002471, 0.004956, -0.003002, -0.001106, -0.008532, -0.007989, -0.016250, -0.021321, -0.032997, -0.038558, -0.051827, -0.055165, -0.066250, -0.074482, -0.090077, -0.092832, -0.106014, -0.108194, -0.120698, -0.125295
#*# 	  0.001935, -0.000630, 0.013407, 0.004431, 0.015231, 0.012908, 0.019423, 0.017083, 0.022209, 0.013605, 0.021533, 0.011409, 0.019742, 0.009621, 0.013928, 0.001220, 0.006034, -0.003475, -0.001386, -0.010289, -0.011489, -0.019718, -0.025032, -0.041738, -0.043960, -0.063361, -0.062878, -0.081623, -0.077986, -0.093257, -0.098675, -0.111804, -0.114117, -0.127893, -0.129634
#*# 	  -0.005683, -0.000456, 0.001883, 0.002800, 0.011276, 0.012264, 0.014525, 0.016572, 0.016717, 0.012191, 0.013981, 0.014263, 0.015268, 0.010313, 0.005059, 0.001028, -0.000390, -0.004849, -0.008445, -0.014463, -0.021497, -0.027439, -0.035494, -0.043912, -0.058762, -0.066965, -0.075773, -0.084386, -0.090240, -0.098615, -0.108635, -0.118243, -0.127434, -0.135824, -0.138380
#*# 	  -0.010518, -0.011744, -0.008566, -0.002683, -0.000932, 0.002876, 0.007308, 0.007858, 0.006638, 0.006207, 0.009026, 0.007565, 0.007818, 0.001212, -0.003285, -0.006893, -0.011067, -0.014493, -0.020627, -0.026526, -0.033294, -0.040666, -0.044541, -0.061469, -0.065073, -0.078599, -0.081176, -0.096475, -0.097574, -0.106414, -0.120720, -0.128527, -0.139762, -0.150137, -0.151807
#*# 	  -0.010871, -0.011976, -0.004902, -0.005516, 0.002110, 0.003513, 0.004344, 0.005790, 0.007347, 0.011290, 0.007465, 0.008660, 0.004928, 0.003266, -0.004478, -0.010906, -0.013672, -0.019236, -0.021840, -0.028274, -0.035595, -0.044466, -0.051164, -0.060087, -0.071515, -0.081844, -0.089272, -0.098519, -0.111375, -0.113764, -0.127383, -0.133085, -0.142370, -0.152679, -0.162231
#*# 	  -0.015762, -0.014434, -0.009924, -0.005428, -0.002778, -0.001477, 0.000281, 0.004372, 0.004751, 0.003133, 0.003322, 0.005724, 0.001187, -0.004922, -0.007525, -0.017006, -0.021261, -0.024924, -0.031382, -0.035243, -0.045471, -0.048422, -0.060196, -0.066557, -0.080133, -0.091221, -0.098094, -0.110070, -0.115104, -0.124087, -0.133624, -0.143530, -0.151969, -0.161408, -0.169981
#*# 	  -0.012222, -0.011758, -0.007753, -0.004311, -0.001940, 0.003345, 0.003093, 0.004835, 0.006373, 0.006306, 0.004110, 0.006538, 0.003104, -0.000028, -0.013144, -0.014225, -0.022547, -0.022949, -0.034033, -0.036279, -0.045573, -0.047444, -0.059530, -0.065780, -0.082986, -0.089639, -0.101678, -0.108771, -0.118981, -0.125529, -0.141636, -0.142247, -0.158545, -0.164789, -0.180067
#*# 	  -0.013241, -0.006213, -0.007302, -0.001557, -0.000388, 0.007673, 0.005937, 0.010385, 0.004478, 0.010633, 0.004772, 0.007224, 0.002566, -0.000960, -0.012344, -0.013178, -0.021253, -0.022868, -0.032532, -0.032976, -0.042825, -0.047801, -0.055866, -0.066113, -0.079907, -0.090209, -0.103115, -0.106986, -0.123196, -0.126005, -0.143560, -0.146578, -0.163093, -0.170752, -0.183150
#*# 	  -0.009740, -0.010885, -0.007302, -0.003637, 0.001390, 0.004838, 0.006757, 0.003687, 0.007585, 0.008443, 0.005719, 0.007582, 0.004771, 0.001605, -0.008918, -0.009737, -0.018043, -0.021271, -0.029068, -0.034671, -0.041907, -0.048889, -0.056693, -0.070067, -0.079828, -0.093428, -0.103597, -0.115482, -0.128994, -0.131565, -0.147180, -0.153701, -0.168360, -0.176979, -0.192891
#*# 	  -0.009606, -0.012620, -0.007209, -0.007335, 0.002666, 0.002958, 0.004393, 0.005969, 0.008375, 0.005676, 0.005470, 0.005542, 0.002273, -0.003195, -0.008522, -0.014188, -0.017790, -0.023523, -0.026940, -0.034842, -0.037604, -0.047169, -0.059122, -0.070299, -0.084102, -0.097427, -0.108298, -0.114429, -0.129140, -0.137630, -0.148638, -0.161287, -0.173111, -0.187755, -0.197391
#*# 	  -0.010807, -0.009094, -0.010274, -0.002228, -0.000607, 0.003522, 0.003109, 0.004050, 0.006424, 0.005399, 0.004428, 0.003535, 0.001930, 0.000013, -0.008762, -0.011079, -0.019754, -0.020218, -0.028547, -0.029525, -0.043358, -0.047430, -0.062880, -0.072365, -0.087602, -0.096844, -0.110578, -0.119716, -0.132671, -0.139722, -0.153755, -0.166139, -0.179651, -0.191661, -0.201845
#*# 	  -0.005481, -0.005572, -0.005216, -0.001299, 0.003537, 0.006667, 0.007090, 0.007359, 0.006383, 0.007112, 0.005947, 0.009631, 0.006436, 0.004941, -0.004475, -0.005996, -0.012358, -0.019839, -0.022773, -0.029731, -0.035395, -0.048518, -0.057539, -0.070387, -0.087866, -0.095005, -0.108414, -0.115414, -0.127574, -0.137111, -0.151655, -0.164794, -0.180805, -0.192995, -0.201292
#*# 	  0.008380, 0.003235, 0.002905, 0.003907, 0.009420, 0.012261, 0.012235, 0.012689, 0.011545, 0.013104, 0.015025, 0.014852, 0.014061, 0.008492, 0.007554, -0.000105, -0.001735, -0.010458, -0.014792, -0.022374, -0.030036, -0.039103, -0.048158, -0.066153, -0.076112, -0.091418, -0.096303, -0.109943, -0.117901, -0.129767, -0.145844, -0.160312, -0.173215, -0.188018, -0.199061
#*# 	  0.011232, 0.008439, 0.011973, 0.007690, 0.015347, 0.013802, 0.018666, 0.016596, 0.021196, 0.017765, 0.022083, 0.018643, 0.022074, 0.013496, 0.015661, 0.006362, 0.002471, -0.004449, -0.011289, -0.015932, -0.024979, -0.033688, -0.048359, -0.060233, -0.073386, -0.084315, -0.097589, -0.105711, -0.119758, -0.130447, -0.142836, -0.158113, -0.171534, -0.184445, -0.195452
#*# 	  0.015883, 0.014586, 0.010947, 0.014178, 0.016374, 0.019511, 0.022435, 0.022964, 0.025365, 0.026860, 0.024595, 0.025788, 0.023955, 0.022556, 0.020521, 0.013105, 0.010002, 0.002189, -0.003134, -0.008274, -0.020369, -0.026701, -0.044581, -0.052181, -0.069631, -0.078957, -0.092810, -0.101559, -0.113784, -0.126563, -0.138538, -0.154745, -0.164506, -0.180625, -0.189897
#*# 	  0.026737, 0.023745, 0.023465, 0.028095, 0.025131, 0.031865, 0.029411, 0.033827, 0.033762, 0.036780, 0.036261, 0.036927, 0.036377, 0.034667, 0.029462, 0.026800, 0.018025, 0.011937, 0.003879, -0.000274, -0.012904, -0.021919, -0.034383, -0.046826, -0.059546, -0.071948, -0.084662, -0.097281, -0.109291, -0.121465, -0.137342, -0.151103, -0.163027, -0.174448, -0.186864
#*# 	  0.040018, 0.041057, 0.040660, 0.038995, 0.042981, 0.042441, 0.045516, 0.046448, 0.047651, 0.050774, 0.049702, 0.051513, 0.052896, 0.049936, 0.046156, 0.042117, 0.035544, 0.026838, 0.020587, 0.010904, 0.002716, -0.009982, -0.021114, -0.033840, -0.047963, -0.061459, -0.072462, -0.087009, -0.097871, -0.109988, -0.126646, -0.139028, -0.151859, -0.165190, -0.175674
#*# 	  0.048967, 0.048960, 0.047872, 0.047974, 0.048545, 0.052232, 0.053678, 0.054423, 0.058919, 0.057573, 0.061733, 0.061018, 0.061929, 0.056834, 0.054389, 0.050599, 0.042547, 0.035735, 0.028132, 0.017357, 0.009749, -0.001058, -0.015379, -0.029069, -0.043411, -0.056175, -0.070372, -0.082164, -0.096492, -0.108564, -0.123178, -0.137943, -0.151963, -0.168078, -0.179697
#*# x_count = 35
#*# y_count = 35
#*# mesh_x_pps = 1
#*# mesh_y_pps = 1
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 45.0
#*# max_x = 300.0
#*# min_y = 25.0
#*# max_y = 325.0
#*#
#*# [input_shaper]
#*# shaper_type_x = zv
#*# shaper_freq_x = 91.6
#*# shaper_type_y = mzv
#*# shaper_freq_y = 68.4
#*#
#*# [skew_correction CaliFlower]
#*# xy_skew = -0.00010043817239680398
#*# xz_skew = 0.0
#*# yz_skew = 0.0
#*#
#*# [scanner]
#*# scanner_touch_threshold = 2000
#*# scanner_touch_z_offset = 0.055
#*# scanner_touch_speed = 2
